# 第5章 実装（Implementation）

## この章のゴール

- 第4章の枠組みが「このリポジトリでどう動いているか」を再現できる粒度で説明する。
- 評価パイプライン（バッチ実験・集計）と Web アプリ（比較・ログ）の両方を、卒論の成果物として位置づける。

## 5.1 システム構成

### 5.1.1 使用ライブラリ
- 形態素解析（例：fugashi）と、LLM API、評価用ライブラリ（埋め込み等）を列挙する。

### 5.1.2 ディレクトリ構造
- 主要ディレクトリと役割（生成、評価、結果、Web）を説明する。

### 5.1.3 API構造
- CLI/スクリプト/サーバ等、利用インタフェースを整理する。

## 5.2 各モジュールの詳細

### 5.2.1 入力処理
- `B` の展開・正規化、テキスト正規化、データ読込の実装を説明する。

### 5.2.2 生成器（Generator）
- oneshot/sequential の呼び出し、プロンプト組み立て、再試行制御を説明する。

### 5.2.3 制約チェッカー
- 表記チェックと読みチェック、形態素解析の扱い、失敗時規約を説明する。

### 5.2.4 評価モジュール
- 制約遵守率、VRR/TTR、時間計測、集計処理を説明する。

### 5.2.5 Webアプリケーション
- 入力UI（元文/禁止文字/方式）、結果の並列表示、ログ収集（失敗例収集）を説明する。
- 主観評価実験に転用する場合の設計（提示方法、匿名化等）も触れる。

## 5.3 実装上の工夫
- 効率化（バッチ、キャッシュ）、バグ回避（正規化・例外処理）、再現性（seed/バージョン固定）を書く。

## 図表候補
- （図）リポジトリ全体構成（生成→評価→Web）。
- （図）Web UI（入力と出力比較画面のキャプチャ）。

## 流用元候補
- `docs/中間報告/中間報告.md`（索引）
- `docs/EXPERIMENT_SUMMARY_JP.md`


# 第8章 考察（Discussion）

本章では，第7章で得られた結果が「なぜそうなったか」を，本研究が提案する枠組み（読みベース制約の検査と，検査に基づく再生成・局所修正）および日本語の言語特性の観点から解釈する。あわせて，実験で明らかになった限界と，今後の設計指針を整理する。なお，本論文では人手評価は未実施であるため，考察は主指標（制約遵守率）と補助指標（VRR/TTR，反復率，実行時間），および代表例の観察に基づいて行う。

## 8.1 制約遵守率の考察
第7章の結果（表7.1〜表7.3）から，読みベース制約遵守率は sequential が oneshot を大きく上回った。とくに行禁止（medium）で差が顕著であり，oneshot はほとんど成功しない一方，sequential は高い成功率を維持している。これは，リポグラムが「1文字でも混入すれば失敗」という厳格な負制約であり，生成モデルに対するプロンプト指示だけでは違反を完全に抑え込みにくいことを示す。

oneshot が破りやすい主因は，生成過程で禁止音（読み）を逐次的に監視・修正していない点にある。表層では問題がなく見えても，読みで禁止音が混入することがあり，とくに日本語では漢字表記が読みの混入を隠してしまう。行禁止のように禁止集合が大きい場合は回避すべき仮名が増えるため，禁則を満たしながら自然な文を一度で生成する難度が急上昇し，微小な違反が残りやすい。

一方で sequential は，「生成→検査→局所修正→再検査」という反復を前提とし，失敗が起こる箇所を逐次的に潰す設計である。読みベースの検査を毎ステップで行い，違反を含むトークン（または局所区間）に介入することで，最終的に違反ゼロへ到達する確率が高くなる。第7章の勝ち負け集計（表7.3）で「sequential のみ成功」が多数を占め，oneshot のみ成功が観測されなかったことは，検査と局所介入が制約遵守に対して決定的に効いていることを裏づける。

## 8.2 日本語に特有の影響
本研究のタスクでは，制約が「ひらがな（音）」で与えられるため，日本語の表記体系（漢字・かな混在）と形態素構造が直接的に難しさへ影響する。まず，同じ意味内容でも語彙選択の自由度は制約により大きく制限される。行禁止では基本語彙や助詞・活用語尾に含まれる頻出音がまとめて禁止されるため，単純な置換では回避できず，文全体の再構成が必要になる。

また，読みベース制約では形態素解析器の出力（読み）に依存するため，未知語・固有表現・解析揺れが判定結果に影響しうる。読みが取得できない場合は安全側に倒して違反とみなす規約としているため，解析が不安定な入力では成功率が下がる可能性がある（本実験では内訳の定量分析は行っていない）。この点は，読みベース制約の厳密性と引き換えに生じる実装上の制約である。

## 8.3 意味保持の難しさ
意味保持は品質要件であるが，本研究では直接的な意味類似度指標や人手評価を実施していないため，第7章の補助指標と代表例に基づき，間接的に議論する。まず，VRR は書き換え量の近似であり，値が高いほど表現の変更が大きいことを示す。第7章では，両方式が成功したケースに限定すると oneshot の VRR が有意に高く（表7.4，図7.3），oneshot がより大きな言い換えを行う傾向が確認された。これは，成功した場合の oneshot が大胆な言い換えで禁則を回避できる一方，その分だけ意味逸脱のリスクも高くなる可能性を示唆する。

一方で，VRR と成功/失敗の関係（図7.5）は，「大きく言い換えるほど制約を満たすのが難しい」傾向を示しており，制約遵守と表現自由度の間にはトレードオフがある。sequential は局所修正を積み重ねるため，結果として VRR が低めになりやすく，元文に近い表現を保ったまま禁則を満たす方向に働く。ただし，局所修正の積み重ねは冗長さや表現の重複を生みうるため，意味保持・自然さの評価は代表例と合わせて慎重に行う必要がある。

## 8.4 手法の限界
第一に，計算コストの増大である。第7章の実行時間（表7.6）から，sequential は oneshot より大幅に遅い。これは，検査と局所介入を反復する設計の必然であり，成功率向上の代償として現れる。実運用では，許容遅延や API 利用コストに応じて，反復回数の上限や介入粒度を調整する必要がある。

第二に，長文・段落への拡張性である。本研究は文単位の生成を対象としており，入力が長くなるほど，違反箇所の探索や局所修正の影響範囲が拡大し，反復回数が増える可能性がある。長文では，局所修正が文全体の整合性（照応や時制など）に波及しやすく，単純な逐次介入では自然さが損なわれる恐れがある。

第三に，読みベース制約の解析器依存である。読み取得に失敗した場合は違反とみなすため，解析の揺れや未知語が多い入力では成功率が過小評価される可能性がある。解析器の変更や辞書拡張，読み推定の補助などは，枠組みの頑健性を高める上で重要な改良点である。

## 8.5 設計指針（枠組み提案としてのまとめ）
第7章の結果を踏まえると，日本語リポグラム生成においては，少なくとも次の設計指針が得られる。

- 厳格な負制約（違反ゼロ）を満たすには，生成後の検査だけでなく，検査に基づく再生成・修正を組み込む必要がある。
- 禁止集合が大きい条件（行禁止）では，oneshot だけでは成功率が急落しやすく，sequential のような局所介入型の枠組みが有効である。
- 一方で sequential は計算コストが増えやすいため，許容遅延に応じて反復回数や介入単位（トークン／句／文）の設計を調整する必要がある。
- 意味保持・自然さの評価は，制約遵守を満たした出力に限定して行うのが望ましい。書き換え量（VRR）や反復率は，品質の兆候を与える補助指標として有用であるが，より直接的な意味評価指標の導入は今後の課題である。
